#:kivy 1.9.1
#:import webbrowser webbrowser
<Button>:
    markup: True

<FolderLabel>:
    text_size: root.width, None
    mipmap: False
    padding_y: 4
    bold: False
    size:self.texture_size
    shorten: True
    canvas:
        Rectangle:
            texture:root.folder_icon.texture
            pos: root.pos[0] -35, root.center_y -7
            size: (17, 13)

<FileLabel>:
    text_size: root.width, None
    mipmap: True
    bold: False
    padding_y: 5
    size:self.texture_size
    shorten: True
    shorten_from: "right"
    canvas:
        Rectangle:
            texture:root.file_icon.texture
            pos: root.pos[0] -20, root.center_y -7
            size: (15, 15)

<FolderLayout>:
    size: 1,27
    Image:
        size_hint: 0.05,0.95
        source:"C:\Users\Master\Pictures\icons\\folder.png"
        mipmap:True
    Label:
        bold: True
        padding: 3,5
        pos: root.pos
        shorten: True
        shorten_from: "right"
        id: l_lab
        text: root.text
        text_size: self.size

<ScrollableLabel>:
    Label:
        size_hint_y: None
        height: self.texture_size[1]
        text_size: self.width, None
        text: root.text
        font_size: root.font_size

<EditorLabel>:
    size_hint: 1,None
    size:0,25
    bold:True

<EditorTextInput@TextInput>:
    size_hint:1,None
    size: 0,29
    multiline: False
    use_bubble: True

<LeftLayout>:
    spacing: 2
    size_hint: 1.05,1
    orientation:"vertical"
    BoxLayout:
        id:tree_button_layout
        size_hint: 1, None
        size:0,28
        BlueButton:
            text:"Change Directory"
            on_press: app.drag_modal.open()
        ProgressSpinner:
            size_hint:0.5,1
            color: 0,0.4,0.8,2
            id: tree_progress
            auto_start: False
            speed:2
        BlueButton:
            text:"Refresh"
            on_press: app.tree_refresh()

<TagEditorLayout>:
    orientation: "vertical"
    BoxLayout:
        spacing: 2
        size_hint:1, 4.5
        ScrollableLabel:
            id: lbl_file
            text: "Camel are an English progressive rock band formed in 1971. Led by founding member Andrew Latimer, they have produced 14 original studio albums, 14 singles plus numerous other compilation and live albums."
            text_size: self.size
            font_size: 15
            valign: "top"
            halign: "left"
        CoverArtImage:
            mipmap:True
            size_hint:0.5,1
    EditorLabel:
        id: lbl_title
        text: "Title:"
    EditorTextInput:
        id: InputTitle
    EditorLabel:
        id: label_artist
        text: "Artist:"
    EditorTextInput:
        id: InputArtist
    EditorLabel:
        id: lbl_tracknumber
        text: "Track Number:"
    EditorTextInput:
        id: InputTracknumber
        input_filter: "int"
    EditorLabel:
        id: lbl_album
        text: "Album:"
    EditorTextInput:
        id: InputAlbum
    EditorLabel:
        id: lbl_date
        text: "Release Date:"
    EditorTextInput:
        id: InputDate
    EditorLabel:
        id: lbl_genre
        text: "Genre:"
    EditorTextInput:
        id: InputGenre
    EditorLabel:
        id: lbl_album_artist
        text: "Album Artist:"
    EditorTextInput:
        id: InputAlbumartist
    BoxLayout:
        spacing: 2
        size_hint: 1,None
        size: 0,30
        orientation: "horizontal"
        BlueButton:
            bold:True
            text: "Auto-Tag This"
            on_press:
        GreenButton:
            text: "Apply Changes"
            bold:True
            on_press: root.print_text_input()
            markup: True

<BlackSpinner@SpinnerOption>:
    background_color:(0,0.4,0.8,1)
    background_normal: ""

<ConverterLayout>:
    spacing: 3
    orientation: "vertical"
    Label:
        size_hint:1,0.1
        id: converter_label
        text: "Music Converter"
        bold:True
    BoxLayout:
        size_hint: 1,None
        size: 0,30
        Label:
            text: "Convert to:"
            size_hint: 0.4, 1
        Spinner:
            background_color:(0,0.4,0.8,1)
            background_normal: ""
            option_cls: "BlackSpinner"
            text: "File Format"
            bold: True
            values: ("FLAC", "ALAC", "MP3", "OGG")
            sync_height: True
    Label:
        size_hint: 1,None
        size: 0,30
        text: "Files To Convert:"
        bold: True
    ScrollView:
        scroll_distance: 30
        ConverterList:
            id: converter_list
            size_hint_y:None
            hide_root: True
            on_file_doubleclick: self.modify_list(self.selected_node)
            height: self.minimum_height
    BoxLayout:
        size_hint: 1,None
        size: 0,30
        Label:
            size_hint: 0.3,1
            text: "Destination:"
            bold:True
        TextInput:
            id: converter_output_text_input
            text: "Destination Folder"
        BlueButton:
            size_hint: 0.1,0.98
            text: "..."
            on_press: app.converter_modal.open()
    BoxLayout:
        spacing: 2
        size_hint: 1,None
        size: 0,30
        BlueButton:
            bold: True
            text: "Clear"
            on_press: converter_list.clear_tree_view()
        GreenButton:
            bold:True
            text: "Convert"


<DragModal>:
    opacity: 1
    size_hint: (0.35, 0.1)
    Label:
        opacity: 1
        text:

<SpinnerOption>:
    size: 50,28

<AppMenuLayout>:
    size_hint:1,None
    size: 0,25
    DropDownRootButton:
        dropdown_object:app.about
        background_color:(0,0,0,1)
        background_color_normal:[0,0,0,1]
        background_normal: ""
        text: "About"
        on_enter: self.dropdown_object.open(self)
        on_leave: self.leave_handler()
    FloatLayout:
        size_hint:10,1
        canvas:
            Color:
                rgba:0,0,0,1
            Rectangle:
                size: self.size
                pos: self.pos

<BottomLayout>:
    size_hint: 1, None
    size: 0,39
    Carousel:
        id:carousel_id
        scroll_timeout: -1
        FloatLayout:
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                RedButton:
                    id: btn1
                    size_hint: None, 0.8
                    size: 160,0
                    text: "Metador!"
                    bold:True
                    on_press:
            AnchorLayout:
                anchor_x: "right"
                anchor_y: "center"
                BlueButton:
                    id: editor_converter_button
                    text: "Converter"
                    size_hint: None, 0.7
                    size: 95,0
                    on_press: app.change_editor_carousel()
        ProgressBar:
            id: metador_progress_bar

<AppMenuButton>:
    height: 25
    size_hint_y: None
    background_color:[0,0,0,1]
    background_color_normal:[0,0,0,1]
    background_color_down:[0,0.4,0.8,1]

<AboutDropDown>:
    AppMenuButton:
        background_color_normal:
        text: "Help"
        on_press:
        on_release: root.dismiss()
    AppMenuButton:
        background_color_normal:[0,0,0,1]
        text: 'About'
        on_press:app.about_modal.open()
        on_release: root.dismiss()

<AboutModal>:
    background_color:[0,0,0,0.4]
    size_hint: None,None
    padding: 15,15
    size: 250,350
    BoxLayout:
        spacing: 5
        orientation:"vertical"
        Label:
            size_hint:1,0.2
            text: "Metador Music Application"
            bold:True
            font_size: 16
        Image:
            mipmap:True
            source: "icons\\music_cover.png"
        Label:
            size_hint:(1,0.1)
            text: "Version 0.0.0.1"
            font_size: 13
        BoxLayout:
            spacing: 3
            orientation: "vertical"
            Label:
                font_size: 16
                text:"Creators:"
                bold:True
            Label:
                text:'Gil "Marlo" Harari'
            Label:
                text: 'Omer "Stringer" Buchnik'
            Label:
                text: 'Paz "Carcetti" Newman'
        BoxLayout:
            spacing: 3
            orientation: "vertical"
            Label:
                font_size: 16
                text:"Powered By:"
                bold:True
            Label:
                text:"[ref=kivy][color=0099ff]Kivy[/color][/ref]"
                markup: True
                on_ref_press:webbrowser.open("https://kivy.org/#home")
            Label:
                text:"[ref=kivy][color=0099ff]AcoustID[/color][/ref]"
                markup: True
                on_ref_press:webbrowser.open("https://acoustid.org/")
            Label:
                text:"[ref=kivy][color=0099ff]Pygn[/color][/ref]"
                markup: True
                on_ref_press:webbrowser.open("https://github.com/cweichen/pygn")

